<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Marketplace</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }
        
        .admin-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .admin-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        .admin-card h3 {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .admin-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }
        
        .admin-card .subtext {
            color: #10b981;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .admin-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        
        .admin-tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.2s;
        }
        
        .admin-tab.active {
            background: #2563eb;
            color: white;
        }
        
        .admin-tab:hover:not(.active) {
            background: #f3f4f6;
        }
        
        .admin-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th {
            background: #f9fafb;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .admin-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            color: #4b5563;
        }
        
        .admin-table tr:hover {
            background: #f9fafb;
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .status-processing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-shipped {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .status-delivered {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-cancelled {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .role-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .role-admin {
            background: #fce7f3;
            color: #be185d;
        }
        
        .role-user {
            background: #e0f2fe;
            color: #0369a1;
        }
        
        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
            /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ */
.btn-edit {
    background: #3b82f6;
    color: white;
}

.btn-edit:hover {
    background: #2563eb;
}

.btn-delete {
    background: #ef4444;
    color: white;
}

.btn-delete:hover {
    background: #dc2626;
}

.action-buttons {
    display: flex;
    gap: 0.5rem;
}

.specifications-container {
    background: #f9fafb;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.spec-item {
    display: flex;
    gap: 1rem;
    margin-bottom: 0.5rem;
    align-items: center;
}

.spec-item input {
    flex: 1;
}

.remove-spec {
    color: #ef4444;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
}

.add-spec-btn {
    background: #10b981;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 0.5rem;
}
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .admin-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">Marketplace</a>
                
                <div class="nav">
                    <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/cart" class="nav-link">–ö–æ—Ä–∑–∏–Ω–∞</a>
                    <a href="/admin" class="nav-link admin-link" style="display: none;">–ê–¥–º–∏–Ω–∫–∞</a>
                    <a href="/profile" class="nav-link auth-link">
                        <svg class="icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <span id="userName">–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </a>
                    <button class="admin-tab" data-tab="logs">–õ–æ–≥–∏</button>
                    <button class="logout-btn btn btn-secondary">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </header>
    <main class="admin-container">
        <div class="admin-header">
            <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–º</p>
        </div>
        
        <div class="admin-cards" id="statsCards">
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="orders">–ó–∞–∫–∞–∑—ã</button>
            <button class="admin-tab" data-tab="products">–¢–æ–≤–∞—Ä—ã</button>
            <button class="admin-tab" data-tab="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
            <button class="admin-tab" data-tab="add-product">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
        </div>
        
        <div class="admin-content">
            <!-- –ó–∞–∫–∞–∑—ã -->
            <div id="ordersTab" class="tab-content">
                <div class="table-container">
                    <table class="admin-table" id="ordersTable">
                        <thead>
                            <tr>
                                <th>‚Ññ –ó–∞–∫–∞–∑–∞</th>
                                <th>–ö–ª–∏–µ–Ω—Ç</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div id="logsTab" class="tab-content" style="display: none;">
    <div class="table-container">
        <h3>–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏</h3>
        <div style="margin-bottom: 1rem; display: flex; gap: 1rem;">
            <button class="btn" id="refreshLogs">–û–±–Ω–æ–≤–∏—Ç—å</button>
            <button class="btn btn-danger" id="clearLogs">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
        </div>
        <div style="background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 8px; font-family: monospace; max-height: 500px; overflow-y: auto;">
            <pre id="logsContent">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</pre>
        </div>
    </div>
</div>
            <!-- –¢–æ–≤–∞—Ä—ã -->
            <div id="productsTab" class="tab-content" style="display: none;">
                <div style="margin-bottom: 1rem; text-align: right;">
                    <button class="btn btn-success" id="refreshProducts">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div class="table-container">
                    <table class="admin-table" id="productsTable">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–û—Å—Ç–∞—Ç–æ–∫</th>
                                <th>–†–µ–π—Ç–∏–Ω–≥</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
            <div id="usersTab" class="tab-content" style="display: none;">
                <div class="table-container">
                    <table class="admin-table" id="usersTable">
                        <thead>
                            <tr>
                                <th>–ò–º—è</th>
                                <th>Email</th>
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th>–†–æ–ª—å</th>
                                <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
<!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ -->
<div id="add-productTab" class="tab-content" style="display: none;">
    <form id="addProductForm">
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
                <input type="text" name="name" class="form-input" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–æ—É—Ç–±—É–∫ Apple MacBook Air">
            </div>
            <div class="form-group">
                <label class="form-label">–¶–µ–Ω–∞ (‚ÇΩ) *</label>
                <input type="number" name="price" class="form-input" required min="0" placeholder="129999">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                <input type="text" name="category" class="form-input" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞">
            </div>
            <div class="form-group">
                <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ *</label>
                <input type="number" name="stock" class="form-input" required min="0" value="10">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">–†–µ–π—Ç–∏–Ω–≥ (0-5)</label>
                <input type="number" name="rating" class="form-input" min="0" max="5" step="0.1" value="4.5" placeholder="4.5">
            </div>
            <div class="form-group">
                <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤</label>
                <input type="number" name="reviews" class="form-input" min="0" value="0" placeholder="0">
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
            <textarea name="description" class="form-input" rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞..."></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
            <input type="url" name="image" class="form-input" 
                   placeholder="https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400">
            <small style="color: #6b7280; display: block; margin-top: 0.25rem;">
                –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ñ–æ—Ç–æ —Å Unsplash: https://unsplash.com/
            </small>
        </div>
        
        <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞ -->
        <div class="form-group">
            <label class="form-label">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞</label>
            <div class="specifications-container" id="addSpecificationsContainer">
                <div class="spec-item">
                    <input type="text" class="form-input spec-key" placeholder="–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä">
                    <input type="text" class="form-input spec-value" placeholder="Apple M2">
                    <button type="button" class="remove-spec">√ó</button>
                </div>
                <div class="spec-item">
                    <input type="text" class="form-input spec-key" placeholder="–ü–∞–º—è—Ç—å">
                    <input type="text" class="form-input spec-value" placeholder="8 –ì–ë">
                    <button type="button" class="remove-spec">√ó</button>
                </div>
            </div>
            <button type="button" class="add-spec-btn" id="addSpecBtnAdd">+ –î–æ–±–∞–≤–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É</button>
        </div>
        
        <div id="addProductError" class="form-error" style="display: none;"></div>
        <div id="addProductSuccess" style="color: #10b981; margin-bottom: 1rem; display: none;">
            ‚úÖ –¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!
        </div>
        
       <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
    <button type="submit" class="btn btn-success" id="addProductBtn" data-processing="false">
        <svg style="width: 20px; height: 20px; margin-right: 0.5rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
        </svg>
        –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
    </button>
    <button type="button" class="btn btn-secondary" onclick="adminPanel.resetAddForm()">
        –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
    </button>
    <button type="button" class="btn" style="background: #8b5cf6; color: white;" 
            onclick="fillTestProductData()">
        –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    </button>
</div>
        
        <div style="margin-top: 1rem; padding: 1rem; background: #f3f4f6; border-radius: 8px;">
            <p style="color: #6b7280; font-size: 0.875rem; margin: 0;">
                <strong>*</strong> ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
            </p>
        </div>
    </form>
</div>
   <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
<div class="modal" id="editOrderModal">
    <div class="modal-content">
        <h3>–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞</h3>
        <form id="editOrderForm">
            <div class="form-group">
                <label class="form-label">–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</label>
                <select name="status" class="form-input" required>
                    <option value="processing">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</option>
                    <option value="shipped">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω</option>
                    <option value="delivered">–î–æ—Å—Ç–∞–≤–ª–µ–Ω</option>
                    <option value="cancelled">–û—Ç–º–µ–Ω–µ–Ω</option>
                </select>
            </div>
            <input type="hidden" name="orderId" id="editOrderId">
            
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button type="submit" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('editOrderModal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
<div class="modal" id="editProductModal">
    <div class="modal-content">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
        <form id="editProductForm">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                    <input type="text" name="name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                    <input type="number" name="price" class="form-input" required min="0">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <input type="text" name="category" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ</label>
                    <input type="number" name="stock" class="form-input" required min="0">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">–†–µ–π—Ç–∏–Ω–≥</label>
                    <input type="number" name="rating" class="form-input" min="0" max="5" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">–û—Ç–∑—ã–≤—ã</label>
                    <input type="number" name="reviews" class="form-input" min="0">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea name="description" class="form-input" rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                <input type="url" name="image" class="form-input" placeholder="https://example.com/image.jpg">
            </div>
            
            <div class="form-group">
                <label class="form-label">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</label>
                <div class="specifications-container" id="specificationsContainer">
                    <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    <div class="spec-item">
                        <input type="text" class="form-input spec-key" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏">
                        <input type="text" class="form-input spec-value" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
                        <button type="button" class="remove-spec">√ó</button>
                    </div>
                </div>
                <button type="button" class="add-spec-btn" id="addSpecBtn">–î–æ–±–∞–≤–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É</button>
            </div>
            
            <input type="hidden" name="productId" id="editProductId">
            
            <div id="editProductError" class="form-error" style="display: none;"></div>
            <div id="editProductSuccess" style="color: #10b981; margin-bottom: 1rem; display: none;">
                –¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button type="submit" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('editProductModal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="modal" id="editUserModal">
        <div class="modal-content">
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
            <form id="editUserForm">
                <div class="form-group">
                    <label class="form-label">–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <select name="role" class="form-input" required>
                        <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                        <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                    </select>
                </div>
                <input type="hidden" name="userId" id="editUserId">
                
                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button type="submit" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editUserModal')">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/app.js"></script>
    <script>
        // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
// –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
class AdminPanel {
    constructor() {
        this.user = null;
        this.currentProductId = null;
        this.init();
    }
    

    // –í –∫–ª–∞—Å—Å–µ AdminPanel –¥–æ–±–∞–≤—å—Ç–µ:
async loadLogs() {
  try {
    const response = await fetch('/api/admin/logs');
    if (response.ok) {
      const data = await response.json();
      if (data.success) {
        this.renderLogs(data.logs);
      }
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤:', error);
  }
}

renderLogs(logs) {
  const logsContent = document.getElementById('logsContent');
  if (!logsContent) return;
  
  if (!logs || logs.length === 0) {
    logsContent.textContent = '–õ–æ–≥–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç';
    return;
  }
  
  logsContent.innerHTML = logs.map(log => {
    // –î–æ–±–∞–≤–ª—è–µ–º —Ü–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
    let coloredLog = log;
    if (log.includes('‚ùå')) coloredLog = `<span style="color: #ff6b6b">${log}</span>`;
    else if (log.includes('‚ö†Ô∏è')) coloredLog = `<span style="color: #ffd93d">${log}</span>`;
    else if (log.includes('‚úÖ')) coloredLog = `<span style="color: #6bcf7f">${log}</span>`;
    else if (log.includes('üì•')) coloredLog = `<span style="color: #4dabf7">${log}</span>`;
    else if (log.includes('üì§')) coloredLog = `<span style="color: #9775fa">${log}</span>`;
    else if (log.includes('‚ÑπÔ∏è')) coloredLog = `<span style="color: #adb5bd">${log}</span>`;
    
    return coloredLog;
  }).join('<br>');
}



const clearLogsBtn = document.getElementById('clearLogs');
if (clearLogsBtn) {
  clearLogsBtn.addEventListener('click', async () => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏?')) {
      try {
        const response = await fetch('/api/admin/logs', {
          method: 'DELETE'
        });
        
        if (response.ok) {
          this.showNotification('–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã', 'success');
          this.loadLogs();
        }
      } catch (error) {
        this.showNotification('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤', 'error');
      }
    }
  });
}

// –í switchToTab –¥–æ–±–∞–≤—å—Ç–µ:
case 'logs':
  console.log('üìã –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–≥–∏...');
  this.loadLogs();
  break;


    async init() {
    console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AdminPanel...');
    
    try {
        await this.checkAdminAccess();
        console.log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–æ–π–¥–µ–Ω–∞');
        
        await this.loadStats();
        console.log('‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        
        await this.loadOrders();
        console.log('‚úÖ –ó–∞–∫–∞–∑—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        
        await this.loadProducts();
        console.log('‚úÖ –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        
        this.setupEventListeners();
        console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
        
        this.setupTabs();
        console.log('‚úÖ –í–∫–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
        
        this.setupSpecifications();
        console.log('‚úÖ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
        
        console.log('‚úÖ AdminPanel –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    } catch (error) {
        console.error('‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
        this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏', 'error');
    }
}
    
async checkAdminAccess() {
        try {
            const response = await fetch('/api/user');
            if (response.ok) {
                const data = await response.json();
                if (data.success && data.user) {
                    this.user = data.user;
                    
                    if (this.user.role !== 'admin') {
                        window.location.href = '/';
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è –≤ –Ω–∞–≤–±–∞—Ä–µ
                    const userName = document.getElementById('userName');
                    if (userName) {
                        userName.textContent = this.user.name;
                    }
                } else {
                    window.location.href = '/login';
                }
            } else {
                window.location.href = '/login';
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:', error);
            window.location.href = '/login';
        }
    }
    
    async loadStats() {
        try {
            const response = await fetch('/api/admin/stats');
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.renderStats(data.stats);
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
        }
    }
    
    renderStats(stats) {
        const container = document.getElementById('statsCards');
        container.innerHTML = `
            <div class="admin-card">
                <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <div class="value">${stats.total_users || 0}</div>
                <div class="subtext">–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</div>
            </div>
            <div class="admin-card">
                <h3>–¢–æ–≤–∞—Ä—ã</h3>
                <div class="value">${stats.total_products || 0}</div>
                <div class="subtext">–í –∫–∞—Ç–∞–ª–æ–≥–µ</div>
            </div>
            <div class="admin-card">
                <h3>–ó–∞–∫–∞–∑—ã</h3>
                <div class="value">${stats.total_orders || 0}</div>
                <div class="subtext">${stats.pending_orders || 0} –æ–∂–∏–¥–∞—é—Ç</div>
            </div>
            <div class="admin-card">
                <h3>–í—ã—Ä—É—á–∫–∞</h3>
                <div class="value">${(stats.total_revenue || 0).toLocaleString()} ‚ÇΩ</div>
                <div class="subtext">–û–±—â–∞—è —Å—É–º–º–∞</div>
            </div>
        `;
    }
    
    async loadOrders() {
        try {
            const response = await fetch('/api/admin/orders');
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.renderOrders(data.orders);
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤:', error);
        }
    }
    
    renderOrders(orders) {
        const tbody = document.querySelector('#ordersTable tbody');
        if (!tbody) return;
        
        if (!orders || orders.length === 0) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="6" style="text-align: center; padding: 2rem;">
                        –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤
                    </td>
                </tr>
            `;
            return;
        }
        
        tbody.innerHTML = orders.map(order => {
            const statusClass = `status-${order.status}`;
            const statusText = {
                'processing': '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ',
                'shipped': '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω',
                'delivered': '–î–æ—Å—Ç–∞–≤–ª–µ–Ω',
                'cancelled': '–û—Ç–º–µ–Ω–µ–Ω'
            }[order.status] || order.status;
            
            const date = new Date(order.created_at).toLocaleDateString('ru-RU');
            
            return `
                <tr>
                    <td>${order.order_number}</td>
                    <td>
                        <div>${order.customer_name}</div>
                        <div style="font-size: 0.875rem; color: #6b7280;">${order.user_email || ''}</div>
                    </td>
                    <td>${date}</td>
                    <td>${parseInt(order.total).toLocaleString()} ‚ÇΩ</td>
                    <td>
                        <span class="status-badge ${statusClass}">${statusText}</span>
                    </td>
                    <td>
                        <button class="btn btn-sm" onclick="adminPanel.editOrder('${order.id}', '${order.status}')">
                            –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                        </button>
                    </td>
                </tr>
            `;
        }).join('');
    }
    
    resetAddForm() {
    document.getElementById('addProductForm').reset();
    
    // –û—á–∏—â–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –æ—Å—Ç–∞–≤–ª—è—è –æ–¥–Ω—É –ø—É—Å—Ç—É—é
    const container = document.getElementById('addSpecificationsContainer');
    container.innerHTML = `
        <div class="spec-item">
            <input type="text" class="form-input spec-key" placeholder="–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä">
            <input type="text" class="form-input spec-value" placeholder="Apple M2">
            <button type="button" class="remove-spec">√ó</button>
        </div>
    `;
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
    document.getElementById('addProductError').style.display = 'none';
    document.getElementById('addProductSuccess').style.display = 'none';
    
    this.showNotification('–§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞', 'info');
}


    async loadProducts() {
        try {
            const response = await fetch('/api/admin/products/all');
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.renderProducts(data.products);
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:', error);
        }
    }
    
    renderProducts(products) {
        const tbody = document.querySelector('#productsTable tbody');
        if (!tbody) return;
        
        if (!products || products.length === 0) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="6" style="text-align: center; padding: 2rem;">
                        –ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä!
                    </td>
                </tr>
            `;
            return;
        }
        
        tbody.innerHTML = products.map(product => `
            <tr>
                <td>
                    <div style="font-weight: 500;">${product.name}</div>
                    <div style="font-size: 0.875rem; color: #6b7280;">
                        ${product.description ? product.description.substring(0, 50) + '...' : ''}
                    </div>
                </td>
                <td>${product.category}</td>
                <td>${parseInt(product.price).toLocaleString()} ‚ÇΩ</td>
                <td>${product.stock}</td>
                <td>${product.rating} ‚òÖ (${product.reviews})</td>
                <td>
                    <div class="action-buttons">
                        <button class="btn btn-sm btn-edit" onclick="adminPanel.editProduct('${product.id}')">
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="btn btn-sm btn-delete" onclick="adminPanel.deleteProduct('${product.id}', '${product.name}')">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </td>
            </tr>
        `).join('');
    }
    
    async loadUsers() {
        try {
            const response = await fetch('/api/admin/users');
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.renderUsers(data.users);
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
        }
    }
    
    renderUsers(users) {
        const tbody = document.querySelector('#usersTable tbody');
        if (!tbody) return;
        
        if (!users || users.length === 0) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="6" style="text-align: center; padding: 2rem;">
                        –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                    </td>
                </tr>
            `;
            return;
        }
        
        tbody.innerHTML = users.map(user => {
            const roleClass = `role-${user.role}`;
            const roleText = user.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            const date = new Date(user.created_at).toLocaleDateString('ru-RU');
            
            // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const canEdit = user.id !== this.user.id;
            
            return `
                <tr>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone || '–ù–µ —É–∫–∞–∑–∞–Ω'}</td>
                    <td>
                        <span class="role-badge ${roleClass}">${roleText}</span>
                    </td>
                    <td>${date}</td>
                    <td>
                        ${canEdit ? `
                            <button class="btn btn-sm" onclick="adminPanel.editUser('${user.id}', '${user.role}')">
                                –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
                            </button>
                        ` : '<span style="color: #6b7280;">–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>'}
                    </td>
                </tr>
            `;
        }).join('');
    }
    
   editOrder(orderId, currentStatus) {
    console.log('‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:', orderId);
    
    try {
        const orderIdInput = document.getElementById('editOrderId');
        const statusSelect = document.querySelector('#editOrderForm select[name="status"]');
        
        if (!orderIdInput) {
            console.error('‚ùå –≠–ª–µ–º–µ–Ω—Ç editOrderId –Ω–µ –Ω–∞–π–¥–µ–Ω');
            this.showNotification('–û—à–∏–±–∫–∞: —ç–ª–µ–º–µ–Ω—Ç —Ñ–æ—Ä–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
            return;
        }
        
        if (!statusSelect) {
            console.error('‚ùå –≠–ª–µ–º–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω');
            this.showNotification('–û—à–∏–±–∫–∞: —ç–ª–µ–º–µ–Ω—Ç —Ñ–æ—Ä–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
            return;
        }
        
        orderIdInput.value = orderId;
        statusSelect.value = currentStatus;
        this.openModal('editOrderModal');
        
        console.log('‚úÖ –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞');
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:', error);
        this.showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã', 'error');
    }
}
    
    editUser(userId, currentRole) {
        document.getElementById('editUserId').value = userId;
        document.querySelector('#editUserForm select[name="role"]').value = currentRole;
        this.openModal('editUserModal');
    }
    
    async editProduct(productId) {
        try {
            const response = await fetch(`/api/admin/products/${productId}`);
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.currentProductId = productId;
                    this.populateEditForm(data.product);
                    this.openModal('editProductModal');
                }
            } else {
                const error = await response.json();
                this.showNotification(error.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞', 'error');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞:', error);
            this.showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
        }
    }
    
    populateEditForm(product) {
        // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞
        document.getElementById('editProductId').value = product.id;
        document.querySelector('#editProductForm input[name="name"]').value = product.name;
        document.querySelector('#editProductForm input[name="price"]').value = product.price;
        document.querySelector('#editProductForm input[name="category"]').value = product.category;
        document.querySelector('#editProductForm input[name="stock"]').value = product.stock;
        document.querySelector('#editProductForm input[name="rating"]').value = product.rating;
        document.querySelector('#editProductForm input[name="reviews"]').value = product.reviews;
        document.querySelector('#editProductForm textarea[name="description"]').value = product.description || '';
        document.querySelector('#editProductForm input[name="image"]').value = product.image || '';
        
        // –û—á–∏—â–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
        const container = document.getElementById('specificationsContainer');
        container.innerHTML = '';
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
        if (product.specifications && Object.keys(product.specifications).length > 0) {
            for (const [key, value] of Object.entries(product.specifications)) {
                this.addSpecificationField(key, value);
            }
        } else {
            this.addSpecificationField('', '');
        }
    }
    
    async deleteProduct(productId, productName) {
        if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä "${productName}"?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!`)) {
            return;
        }
        
        try {
            const response = await fetch(`/api/admin/products/${productId}`, {
                method: 'DELETE'
            });
            
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.showNotification('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω', 'success');
                    await this.loadProducts();
                }
            } else {
                const error = await response.json();
                this.showNotification(error.error || '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è', 'error');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:', error);
            this.showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
        }
    }
    
    async updateProduct(productId, productData) {
        try {
            const response = await fetch(`/api/admin/products/${productId}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(productData)
            });
            
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.showNotification('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω', 'success');
                    await this.loadProducts();
                    this.closeModal('editProductModal');
                }
            } else {
                const error = await response.json();
                document.getElementById('editProductError').textContent = error.error || '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è';
                document.getElementById('editProductError').style.display = 'block';
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:', error);
            document.getElementById('editProductError').textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏';
            document.getElementById('editProductError').style.display = 'block';
        }
    }
    
async addProduct(productData) {
    try {
        console.log('‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:', productData);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        const submitBtn = document.querySelector('#addProductForm button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = `
            <svg style="width: 20px; height: 20px; margin-right: 0.5rem;" class="animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
            </svg>
            –î–æ–±–∞–≤–ª—è–µ–º...
        `;
        submitBtn.disabled = true;
        
        const response = await fetch('/api/admin/products', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(productData)
        });
        
        if (response.ok) {
            const data = await response.json();
            if (data.success) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                document.getElementById('addProductSuccess').style.display = 'block';
                document.getElementById('addProductError').style.display = 'none';
                
                this.showNotification(`–¢–æ–≤–∞—Ä "${productData.name}" —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω! ID: ${data.productId}`, 'success');
                
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                this.resetAddForm();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ç–æ–≤–∞—Ä–æ–≤
                await this.loadProducts();
                this.switchToTab('products');
            }
        } else {
            const error = await response.json();
            document.getElementById('addProductError').textContent = error.error || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞';
            document.getElementById('addProductError').style.display = 'block';
            document.getElementById('addProductSuccess').style.display = 'none';
            
            this.showNotification(error.error || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞', 'error');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:', error);
        document.getElementById('addProductError').textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.';
        document.getElementById('addProductError').style.display = 'block';
        
        this.showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
    } finally {
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        const submitBtn = document.querySelector('#addProductForm button[type="submit"]');
        if (submitBtn) {
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    }
}
    
    async updateOrderStatus(orderId, status) {
        try {
            const response = await fetch(`/api/admin/orders/${orderId}/status`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ status })
            });
            
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.showNotification('–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω', 'success');
                    await this.loadOrders();
                    this.closeModal('editOrderModal');
                }
            } else {
                const error = await response.json();
                this.showNotification(error.error || '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è', 'error');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:', error);
            this.showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
        }
    }
    
    async updateUserRole(userId, role) {
        try {
            const response = await fetch(`/api/admin/users/${userId}/role`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ role })
            });
            
            if (response.ok) {
                const data = await response.json();
                if (data.success) {
                    this.showNotification('–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞', 'success');
                    await this.loadUsers();
                    this.closeModal('editUserModal');
                }
            } else {
                const error = await response.json();
                this.showNotification(error.error || '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è', 'error');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
            this.showNotification('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
        }
    }
    
  setupEventListeners() {
    console.log('üéÆ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π...');
    
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    this.removeEventListeners();
    
    // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
    document.querySelector('.logout-btn').addEventListener('click', this.handleLogout.bind(this));
    
    // –§–æ—Ä–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
    document.getElementById('editOrderForm').addEventListener('submit', this.handleOrderSubmit.bind(this));
    
    // –§–æ—Ä–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    document.getElementById('editUserForm').addEventListener('submit', this.handleUserSubmit.bind(this));
    
    // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
    document.getElementById('addProductForm').addEventListener('submit', this.handleAddProductSubmit.bind(this));
    
    // –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
    document.getElementById('editProductForm').addEventListener('submit', this.handleEditProductSubmit.bind(this));
    
    // –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
    const refreshBtn = document.getElementById('refreshProducts');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', this.handleRefreshProducts.bind(this));
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—á–∏—Å—Ç–∫–∏ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
    const resetBtn = document.querySelector('#addProductForm button[type="reset"]');
    if (resetBtn) {
        resetBtn.addEventListener('click', this.handleResetForm.bind(this));
    }
    // –í setupEventListeners –¥–æ–±–∞–≤—å—Ç–µ:
const refreshLogsBtn = document.getElementById('refreshLogs');
if (refreshLogsBtn) {
  refreshLogsBtn.addEventListener('click', () => {
    this.loadLogs();
  });
}
    console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
}

removeEventListeners() {
    console.log('üßπ –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏...');
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–µ—Ç–æ–¥—ã
    const logoutBtn = document.querySelector('.logout-btn');
    const editOrderForm = document.getElementById('editOrderForm');
    const editUserForm = document.getElementById('editUserForm');
    const addProductForm = document.getElementById('addProductForm');
    const editProductForm = document.getElementById('editProductForm');
    const refreshBtn = document.getElementById('refreshProducts');
    const resetBtn = document.querySelector('#addProductForm button[type="reset"]');
    
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    if (logoutBtn) {
        logoutBtn.removeEventListener('click', this.handleLogout);
        logoutBtn.removeEventListener('click', this.handleLogoutBound);
    }
    
    if (editOrderForm) {
        editOrderForm.removeEventListener('submit', this.handleOrderSubmit);
    }
    
    if (editUserForm) {
        editUserForm.removeEventListener('submit', this.handleUserSubmit);
    }
    
    if (addProductForm) {
        addProductForm.removeEventListener('submit', this.handleAddProductSubmit);
    }
    
    if (editProductForm) {
        editProductForm.removeEventListener('submit', this.handleEditProductSubmit);
    }
    
    if (refreshBtn) {
        refreshBtn.removeEventListener('click', this.handleRefreshProducts);
    }
    
    if (resetBtn) {
        resetBtn.removeEventListener('click', this.handleResetForm);
    }
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
handleLogout = async (e) => {
    e.preventDefault();
    try {
        await fetch('/api/logout', { method: 'POST' });
        window.location.href = '/';
    } catch (error) {
        this.showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ', 'error');
    }
}

handleOrderSubmit = async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderId = formData.get('orderId');
    const status = formData.get('status');
    
    await this.updateOrderStatus(orderId, status);
}

handleUserSubmit = async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const userId = formData.get('userId');
    const role = formData.get('role');
    
    await this.updateUserRole(userId, role);
}

handleAddProductSubmit = async (e) => {
    e.preventDefault();
    console.log('‚ûï –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞...');
    
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = '–î–æ–±–∞–≤–ª—è–µ–º...';
    submitBtn.disabled = true;
    
    const formData = new FormData(e.target);
    
    // –°–æ–±–∏—Ä–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    const specifications = {};
    const specElements = document.querySelectorAll('#addSpecificationsContainer .spec-item');
    specElements.forEach(spec => {
        const key = spec.querySelector('.spec-key').value.trim();
        const value = spec.querySelector('.spec-value').value.trim();
        if (key && value) {
            specifications[key] = value;
        }
    });
    
    const productData = {
        name: formData.get('name'),
        price: parseInt(formData.get('price')),
        category: formData.get('category'),
        description: formData.get('description'),
        image: formData.get('image'),
        stock: parseInt(formData.get('stock')),
        rating: parseFloat(formData.get('rating')) || 0,
        reviews: parseInt(formData.get('reviews')) || 0,
        specifications: specifications
    };
    
    console.log('üì¶ –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞:', productData);
    
    try {
        await this.addProduct(productData);
    } finally {
        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    }
}

handleEditProductSubmit = async (e) => {
    e.preventDefault();
    console.log('‚úèÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞...');
    
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = '–°–æ—Ö—Ä–∞–Ω—è–µ–º...';
    submitBtn.disabled = true;
    
    const formData = new FormData(e.target);
    const productId = formData.get('productId');
    
    // –°–æ–±–∏—Ä–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    const specifications = {};
    const specElements = document.querySelectorAll('#specificationsContainer .spec-item');
    specElements.forEach(spec => {
        const key = spec.querySelector('.spec-key').value.trim();
        const value = spec.querySelector('.spec-value').value.trim();
        if (key && value) {
            specifications[key] = value;
        }
    });
    
    const productData = {
        name: formData.get('name'),
        price: parseInt(formData.get('price')),
        category: formData.get('category'),
        description: formData.get('description'),
        image: formData.get('image'),
        stock: parseInt(formData.get('stock')),
        rating: parseFloat(formData.get('rating')) || 0,
        reviews: parseInt(formData.get('reviews')) || 0,
        specifications: specifications
    };
    
    console.log('üì¶ –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', productData);
    
    try {
        await this.updateProduct(productId, productData);
    } finally {
        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    }
}

handleRefreshProducts = () => {
    console.log('üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...');
    this.loadProducts();
}

handleResetForm = () => {
    console.log('üßπ –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞...');
    // –û—á–∏—â–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    const container = document.getElementById('addSpecificationsContainer');
    if (container) {
        container.innerHTML = '';
        container.appendChild(this.createSpecificationField());
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
    document.getElementById('addProductError').style.display = 'none';
    document.getElementById('addProductSuccess').style.display = 'none';
}
    setupTabs() {
    console.log('üìë –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–∫–ª–∞–¥–∫–∏...');
    
    try {
        const tabs = document.querySelectorAll('.admin-tab');
        console.log('üîç –ù–∞–π–¥–µ–Ω–æ –≤–∫–ª–∞–¥–æ–∫:', tabs.length);
        
        tabs.forEach((tab, index) => {
            console.log(`   ${index}. –í–∫–ª–∞–¥–∫–∞:`, tab.textContent);
            
            tab.addEventListener('click', (e) => {
                e.preventDefault();
                const tabId = tab.dataset.tab;
                console.log('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:', tabId);
                this.switchToTab(tabId);
            });
        });
        
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É
        if (tabs.length > 0) {
            const firstTab = tabs[0];
            const firstTabId = firstTab.dataset.tab;
            this.switchToTab(firstTabId);
        }
        
        console.log('‚úÖ –í–∫–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∫–ª–∞–¥–æ–∫:', error);
    }
}
    
 switchToTab(tabId) {
    console.log(`üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É: ${tabId}`);
    
    
    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
    tabs.forEach(t => t.classList.remove('active'));
    tabContents.forEach(content => content.style.display = 'none');
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–µ
    const currentTab = document.querySelector(`[data-tab="${tabId}"]`);
    if (currentTab) {
        currentTab.classList.add('active');
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
    const activeTab = document.getElementById(`${tabId}Tab`);
    if (activeTab) {
        console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏: ${tabId}Tab`);
        activeTab.style.display = 'block';
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫
        switch(tabId) {
            case 'products':
                console.log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã...');
                this.loadProducts();
                break;
            case 'users':
                console.log('üë• –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...');
                this.loadUsers();
                break;
            case 'orders':
                console.log('üìã –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã...');
                this.loadOrders();
                break;
            case 'add-product':
                console.log('‚ûï –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞');
                // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
                break;
             case 'logs':
                console.log('üìã –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–≥–∏...');
                this.loadLogs();
                break;
        }
    } else {
        console.log(`‚ö†Ô∏è –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏ —Å id="${tabId}Tab" –Ω–µ –Ω–∞–π–¥–µ–Ω`);
    }
   


    
}
    
    setupSpecificationsListeners() {
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        document.getElementById('addSpecBtn')?.addEventListener('click', () => {
            this.addSpecificationField('', '');
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≤ —Ñ–æ—Ä–º–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        document.getElementById('addSpecBtnAdd')?.addEventListener('click', () => {
            this.addSpecificationField('', '', 'addSpecificationsContainer');
        });
    }
    
    addSpecificationField(key = '', value = '', containerId = 'specificationsContainer') {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        const specDiv = document.createElement('div');
        specDiv.className = 'spec-item';
        specDiv.innerHTML = `
            <input type="text" class="form-input spec-key" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏" value="${key}">
            <input type="text" class="form-input spec-value" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ" value="${value}">
            <button type="button" class="remove-spec">√ó</button>
        `;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è
        const removeBtn = specDiv.querySelector('.remove-spec');
        removeBtn.addEventListener('click', () => {
            if (container.querySelectorAll('.spec-item').length > 1) {
                specDiv.remove();
            }
        });
        
        container.appendChild(specDiv);
    }
    
    createSpecificationField() {
        return `
            <div class="spec-item">
                <input type="text" class="form-input spec-key" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏">
                <input type="text" class="form-input spec-value" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
                <button type="button" class="remove-spec">√ó</button>
            </div>
        `;
    }
    
    openModal(modalId) {
        document.getElementById(modalId).classList.add('active');
    }
    
    closeModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
        document.getElementById('editProductError').style.display = 'none';
        document.getElementById('editProductSuccess').style.display = 'none';
    }
    
    showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        notification.style.position = 'fixed';
        notification.style.top = '20px';
        notification.style.right = '20px';
        notification.style.zIndex = '9999';
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
}    
       
// –ë—ã—Å—Ç—Ä–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
function fillTestProductData() {
    const testProducts = [
        {
            name: "–°–º–∞—Ä—Ç—Ñ–æ–Ω iPhone 15 Pro",
            price: 119999,
            category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
            stock: 25,
            rating: 4.8,
            reviews: 189,
            description: "–ù–æ–≤—ã–π iPhone 15 Pro —Å —Ç–∏—Ç–∞–Ω–æ–≤—ã–º –∫–æ—Ä–ø—É—Å–æ–º, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º A17 Pro –∏ –∫–∞–º–µ—Ä–æ–π 48 –ú–ø.",
            image: "https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=400",
            specs: [
                { key: "–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", value: "A17 Pro" },
                { key: "–ü–∞–º—è—Ç—å", value: "256 –ì–ë" },
                { key: "–≠–∫—Ä–∞–Ω", value: "6.1'' Super Retina XDR" },
                { key: "–ö–∞–º–µ—Ä–∞", value: "48 –ú–ø + 12 –ú–ø + 12 –ú–ø" }
            ]
        },
        {
            name: "–ò–≥—Ä–æ–≤–∞—è –∫–æ–Ω—Å–æ–ª—å PlayStation 5",
            price: 64999,
            category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
            stock: 15,
            rating: 4.9,
            reviews: 312,
            description: "–ò–≥—Ä–æ–≤–∞—è –∫–æ–Ω—Å–æ–ª—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 4K –∏ ray tracing.",
            image: "https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=400",
            specs: [
                { key: "–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", value: "AMD Zen 2" },
                { key: "–ì—Ä–∞—Ñ–∏–∫–∞", value: "AMD RDNA 2" },
                { key: "–ü–∞–º—è—Ç—å", value: "825 –ì–ë SSD" },
                { key: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞", value: "4K, 120fps, Ray Tracing" }
            ]
        },
        {
            name: "–£–º–Ω—ã–µ —á–∞—Å—ã Apple Watch Series 9",
            price: 42999,
            category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
            stock: 42,
            rating: 4.7,
            reviews: 156,
            description: "–£–º–Ω—ã–µ —á–∞—Å—ã —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∑–¥–æ—Ä–æ–≤—å—è, GPS –∏ –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –¥–∏—Å–ø–ª–µ–µ–º.",
            image: "https://images.unsplash.com/photo-1434493650001-5d43a6fea0d6?w=400",
            specs: [
                { key: "–≠–∫—Ä–∞–Ω", value: "Always-On Retina" },
                { key: "GPS", value: "–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π" },
                { key: "–í–æ–¥–æ–∑–∞—â–∏—Ç–∞", value: "50–º" },
                { key: "–ë–∞—Ç–∞—Ä–µ—è", value: "18 —á–∞—Å–æ–≤" }
            ]
        }
    ];
    
    const randomProduct = testProducts[Math.floor(Math.random() * testProducts.length)];
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
    document.querySelector('#addProductForm input[name="name"]').value = randomProduct.name;
    document.querySelector('#addProductForm input[name="price"]').value = randomProduct.price;
    document.querySelector('#addProductForm input[name="category"]').value = randomProduct.category;
    document.querySelector('#addProductForm input[name="stock"]').value = randomProduct.stock;
    document.querySelector('#addProductForm input[name="rating"]').value = randomProduct.rating;
    document.querySelector('#addProductForm input[name="reviews"]').value = randomProduct.reviews;
    document.querySelector('#addProductForm textarea[name="description"]').value = randomProduct.description;
    document.querySelector('#addProductForm input[name="image"]').value = randomProduct.image;
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    const container = document.getElementById('addSpecificationsContainer');
    container.innerHTML = '';
    
    randomProduct.specs.forEach(spec => {
        adminPanel.addSpecificationField(spec.key, spec.value, 'addSpecificationsContainer');
    });
    
    adminPanel.showNotification('–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏', 'info');
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
       
       
    
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        document.addEventListener('DOMContentLoaded', () => {
            window.adminPanel = new AdminPanel();
        });
    </script>
